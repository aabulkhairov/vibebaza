---
title: Inoyu MCP сервер
description: MCP сервер, позволяющий Claude поддерживать пользовательский контекст через управление профилями Apache Unomi, с поддержкой версий V2 и V3, управлением согласиями и мультитенантными возможностями.
tags:
- CRM
- Analytics
- Database
- API
- Integration
author: sergehuber
featured: false
---

MCP сервер, позволяющий Claude поддерживать пользовательский контекст через управление профилями Apache Unomi, с поддержкой версий V2 и V3, управлением согласиями и мультитенантными возможностями.

## Установка

### NPX

```bash
npx @inoyu/mcp-unomi-server
```

## Конфигурация

### Claude Desktop

```json
{
  "mcpServers": {
    "unomi-server": {
      "command": "npx",
      "args": ["@inoyu/mcp-unomi-server"],
      "env": {
        "UNOMI_BASE_URL": "http://your-unomi-server:8181",
        "UNOMI_VERSION": "3",
        "UNOMI_USERNAME": "your-username",
        "UNOMI_PASSWORD": "your-password",
        "UNOMI_PROFILE_ID": "your-profile-id",
        "UNOMI_KEY": "your-unomi-key",
        "UNOMI_EMAIL": "your-email@example.com",
        "UNOMI_SOURCE_ID": "claude-desktop",
        "UNOMI_TENANT_ID": "your-tenant-id",
        "UNOMI_PUBLIC_KEY": "your-public-key",
        "UNOMI_PRIVATE_KEY": "your-private-key"
      }
    }
  }
}
```

## Доступные инструменты

| Инструмент | Описание |
|------|-------------|
| `get_my_profile` | Получение вашего профиля с использованием переменных окружения с опциональными сегментами и баллами |
| `update_my_profile` | Обновление свойств вашего профиля с помощью пар ключ-значение |
| `get_profile` | Получение конкретного профиля по ID |
| `search_profiles` | Поиск профилей по полям firstName, lastName и email |
| `create_scope` | Создание новой области Unomi для отслеживания событий и обновления профилей |
| `get_tenant_info` | Получение информации о текущем тенанте (только V3) |
| `update_consent` | Обновление статуса согласия пользователя с использованием события modifyConsent с соблюдением GDPR |
| `get_consent` | Получение конкретной информации о согласии для профиля |
| `list_consents` | Список всех согласий для профиля с опциональной фильтрацией по статусу и области |

## Возможности

- Поиск профиля по email с автоматическим созданием
- Доступ к свойствам профиля, сегментам и баллам
- JSON формат для всего обмена данными
- Автоматическое управление сессиями с ID на основе даты
- Совместимость с Apache Unomi V2/V3 с автоматическим определением версии
- Поддержка мультитенантной аутентификации
- GDPR-совместимое управление согласиями с автоматическим истечением
- Изоляция контекста на основе областей
- Распознавание пользователей между диалогами
- Согласованный пользовательский контекст между сессиями

## Переменные окружения

### Обязательные
- `UNOMI_BASE_URL` - Базовый URL сервера Apache Unomi

### Опциональные
- `UNOMI_VERSION` - Версия Unomi (2 или 3, по умолчанию 3)
- `UNOMI_USERNAME` - Имя пользователя для аутентификации (обязательно для V2, резервное для V3)
- `UNOMI_PASSWORD` - Пароль для аутентификации (обязательно для V2, резервное для V3)
- `UNOMI_PROFILE_ID` - ID профиля для резервного использования, когда поиск по email не удается
- `UNOMI_KEY` - Ключ авторизации Unomi (обязательно только для V2)
- `UNOMI_EMAIL` - Email адрес для поиска профиля
- `UNOMI_SOURCE_ID` - Идентификатор источника для операций
- `UNOMI_TENANT_ID` - ID тенанта для мультитенантной аутентификации V3

## Примеры использования

```
Получить информацию о моем профиле, включая сегменты и баллы
```

```
Обновить мой профиль с новыми предпочтениями, такими как firstName, age или статус подписки
```

```
Найти профили по имени или email
```

```
Обновить мой статус согласия на маркетинговые коммуникации
```

```
Список всех моих настроек согласия
```

## Ресурсы

- [GitHub Repository](https://github.com/sergehuber/inoyu-mcp-unomi-server)

## Примечания

Ранняя реализация только для демонстрационных целей, не проверена для использования в продакшене. Поддерживает Apache Unomi V2 и V3 с различными методами аутентификации. Включает комплексные возможности управления согласиями для соблюдения GDPR. Требует правильной конфигурации сервера Unomi, включая внесение IP в белый список и настройку CORS.